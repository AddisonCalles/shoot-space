"use strict";function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){function t(t,e,i,n,s){void 0===n&&(n=0),void 0===s&&(s=0),this._offset={x:0,y:0},this._layers=[],this._rotation=0,this._debug=!1,this._width=n,this._height=s,this._x=e,this._y=i,this._ctx=t.getContext("2d"),this._canvas=t}var i=t.prototype;return i.setLeyers=function(t){this._layers=t},i.move=function(t,e){this._x+=t,this._y+=e},i.rotate=function(t){this._rotation=this._rotation+t},i.setPos=function(t,e){this._x=t,this._y=e},i.setCanvas=function(t){this._canvas=t,this._ctx=this._canvas.getContext("2d")},i.centerOffset=function(){this._offset={x:this.width/2,y:this.height/2}},i.render=function(){this._layers.forEach((function(t){t.render()})),this._debug&&(this.context.fillStyle="orange",this.context.font="10px Arial",this.context.fillText("("+this.x.toFixed()+","+this.y.toFixed(0)+")",this.x-10,this.y-10),this.context.strokeStyle="gray",this.context.strokeRect(this.x,this.y,this.width,this.height),this.context.beginPath(),this.context.arc(this.x,this.y,4,0,2*Math.PI),this.context.fill())},i.enableDebug=function(){this._debug=!0},e(t,[{key:"context",get:function(){return this._ctx}},{key:"canvas",get:function(){return this._canvas}},{key:"x",get:function(){return this._x+this._offset.x}},{key:"y",get:function(){return this._y+this._offset.y}},{key:"x2",get:function(){return this.x+this._width}},{key:"y2",get:function(){return this.y+this._height}},{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"offset",get:function(){return this._offset},set:function(t){this._offset=t}}]),t}(),s=function(){function t(){this._listeners=[]}var e=t.prototype;return e.subscribe=function(t){this._listeners.push(t)},e.unsubscribe=function(t){this._listeners=this._listeners.filter((function(e){return e!==t}))},e.emit=function(t){this._listeners.forEach((function(e){return e(t)}))},t}(),r=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},o=function(t,e){var i=t*Math.PI/180;return{x:e*Math.cos(i),y:e*Math.sin(i)}},h=function(t,e){return{vel:Math.abs(Math.pow(Math.pow(t,2)+Math.pow(e,2),1)/2),dir:Math.atan(e/t)}},a={__proto__:null,random:function(t,e){return Math.random()*(t-e)+e},angleBetweenPoints:r,vectorComponents:o,vectorByXY:h},c={__proto__:null,rgba:function(t,e){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?"rgba("+parseInt(i[1],16)+","+parseInt(i[2],16)+","+parseInt(i[3],16)+", "+e+")":""}},u=function(){function t(t){this._play=!1,this._level=0,this._context={},this._points=0,this._canvas={},this._gameover=!1,this._playEvent=new s,this._preloadEvent=new s,this._gameOverEvent=new s,this._renderEvent=new s,this._nextLevelEvent=new s,this._fps=1,this._fpsCounter=0,this._time=0,this._initTime=0,this._lastTime=0,this._controls={fire:new s,move:new s,jump:new s},this._canvas=t,this._context=null==t?void 0:t.getContext("2d"),this._preloadEvent.emit(this)}var i=t.prototype;return i.render=function(){this._context&&this._renderEvent.emit(this)},i._initMouseEvents=function(){var t,e,i=this;null==(t=this._canvas)||t.addEventListener("click",(function(t){i._controls.fire.emit({context:i,event:t})})),null==(e=this._canvas)||e.addEventListener("mousemove",(function(t){i._controls.move.emit({context:i,event:t})}))},i.clearCanvas=function(){var t,e,i;this._context&&this._canvas&&(null==(t=this._context)||t.clearRect(0,0,null==(e=this._canvas)?void 0:e.width,null==(i=this._canvas)?void 0:i.height))},i.play=function(){this._play=!0},i.nextLevel=function(t){void 0===t&&(t=0),this._level++,setTimeout((function(){}),t)},i.start=function(){var t=this;this._initTime=(new Date).getTime(),this._mainRunner=setInterval((function(){t.clearCanvas(),t.render();var e=(new Date).getTime(),i=e-t._lastTime;t._time=+((e-t._initTime)/1e3).toFixed(0),i>=1e3&&(t._lastTime=(new Date).getTime(),t._fps=t._fpsCounter,t._fpsCounter=0),t._fpsCounter++}),1e3/60)},i.stop=function(){clearInterval(this._mainRunner)},i.incrementPoints=function(t){return this._points+=t},e(t,[{key:"gameOverEvent",get:function(){return this._gameOverEvent}},{key:"nextLevelEvent",get:function(){return this._nextLevelEvent}},{key:"playEvent",get:function(){return this._playEvent}},{key:"gameOver",get:function(){return this._gameover}},{key:"points",get:function(){return this._points}},{key:"level",get:function(){return this._level}},{key:"isPlay",get:function(){return this._play}},{key:"time",get:function(){return this._time}},{key:"fps",get:function(){return this._fps}}]),t}(),_=function(){function t(t){this._reduceEvent=new s,this._deadEvent=new s,this._total=t,this._health=t}var i=t.prototype;return i.reset=function(){this._health=this._total},i.reduce=function(t){var e=this._health-t;e<=0?(this._health=0,this.deadEvent.emit(this)):this._health=e},e(t,[{key:"current",get:function(){return this._health}},{key:"total",get:function(){return this._total}},{key:"reduceEvent",get:function(){return this._reduceEvent}},{key:"deadEvent",get:function(){return this._deadEvent}},{key:"isDead",get:function(){return this.current<=0}}]),t}(),l=function(){function t(t){this._vel=0,this._dir=0,this._velX=0,this._velY=0,this._element=t}var i=t.prototype;return i.setVel=function(t){this.setVector(t,this._dir)},i.setDir=function(t){this.setVector(this._vel,t)},i.rotate=function(t){this._dir=(this._dir+t)%360,this.setVector(this._vel,this._dir)},i.rotateTo=function(t){var e=r(this._element,t);this.setDir(e)},i.setVector=function(t,e){this._vel=Math.abs(t),this._dir=e;var i=o(this._dir,this._vel);this._velX=i.x,this._velY=i.y},i.setVelXY=function(t,e){this._velX=t,this._velY=e;var i=h(t,e);this._vel=i.vel,this._dir=i.dir},e(t,[{key:"vel",get:function(){return{vel:this._vel,x:this._velX,y:this._velY}}},{key:"dir",get:function(){return this._dir}}]),t}(),f=function(t){var n,s;function r(e,i,n,s,r){var o;return void 0===s&&(s=0),void 0===r&&(r=0),(o=t.call(this,e,i,n,s,r)||this)._destroy=!1,o._vector=new l(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(o)),o._enabledVectorRotation=!0,o._path=new Path2D,o._vector.setVector(0,0),o}s=t,(n=r).prototype=Object.create(s.prototype),n.prototype.constructor=n,i(n,s);var o=r.prototype;return o.edgeColision=function(){return this.x<=0&&this._vector.vel.x<0?"right":this.x2>=this.canvas.width&&this._vector.vel.x>0?"left":this.y<=0&&this._vector.vel.y<0?"top":this.y2>=this.canvas.height&&this._vector.vel.y>0&&"bottom"},o.hasColision=function(t){var e=!1;(this.x<=t.x2&&t.x<=this.x2||this.x2>=t.x&&this.x2<=t.x2)&&(e=!0);var i=!1;return(this.y<=t.y2&&t.y<=this.y2||this.y2>=t.y&&this.y2<=t.y2)&&(i=!0),e&&i},o.move=function(){t.prototype.move.call(this,this._vector.vel.x,this._vector.vel.y)},o.isDestroy=function(){return this._destroy},o.destroy=function(){this._destroy=!0},e(r,[{key:"vector",get:function(){return this._vector}},{key:"path",get:function(){return this._path}},{key:"enabledVectorRotation",get:function(){return this._enabledVectorRotation},set:function(t){this._enabledVectorRotation=t}}]),r}(n),v=function(){function t(t,e,i){this._rotation=0,this._color=e,this._path=t,this._originalPath=t,this._element=i}var i=t.prototype;return i.rotate=function(t){var e=new Path2D;e.addPath(this._originalPath,DOMMatrix.fromMatrix().translate(this._element.width/2,this._element.height/2).rotate(t).translate(this._element.width/2*-1,this._element.height/2*-1)),this._path=new Path2D,this.path.addPath(e,DOMMatrix.fromMatrix().translate(this._element.x,this._element.y))},i.render=function(){this.rotate(this.rotation+this._element.rotation+(this._element.enabledVectorRotation?this._element.vector.dir:0)),this._element.context.fillStyle=this.color,this._element.context.fill(this._path)},e(t,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t}},{key:"color",get:function(){return this._color}},{key:"path",get:function(){return this._path}}]),t}();exports.Drawable=n,exports.EventListener=s,exports.Game=u,exports.Health=_,exports.Kinematic=f,exports.LayerPath=v,exports.Point=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e},exports.Vector=l,exports.color=c,exports.math=a;
//# sourceMappingURL=streetzero.cjs.production.min.js.map
